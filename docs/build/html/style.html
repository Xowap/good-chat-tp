

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coding Style (and related) &mdash; documentation Good Chat 1.0.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="documentation Good Chat 1.0.0" href="index.html"/>
        <link rel="prev" title="Stories" href="stories.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Good Chat
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="app.html">L&#8217;application Good Chat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.html#maquette">Maquette</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#technologie">Technologie</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#architecture">Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="libs.html">Bibliothèques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="libs.html#goodchat-js">goodchat.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="libs.html#randname-js">randname.js</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="start.html">Démarer le TP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="start.html#prerequis">Prérequis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="start.html#ide">IDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="start.html#bower">Bower</a></li>
<li class="toctree-l3"><a class="reference internal" href="start.html#http-server">HTTP Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="start.html#installer-les-sources">Installer les sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#demarer-le-serveur-http">Démarer le serveur HTTP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stories.html">Stories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stories.html#avoir-un-nom-automatique">1. Avoir un nom automatique</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stories.html#fonctions-a-coder">Fonctions à coder</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#exemples">Exemples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stories.html#definir-la-valeur-d-un-input">Définir la valeur d&#8217;un input</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stories.html#changer-son-nom">2. Changer son nom</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id1">Fonctions à coder</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id2">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id3">Exemples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stories.html#surveiller-les-valeurs-d-un-input">Surveiller les valeurs d&#8217;un input</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#sauvegarder-un-nom-dans-randname">Sauvegarder un nom dans randName</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stories.html#voir-les-messages-recus">3. Voir les messages reçus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id4">Fonctions à coder</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id5">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id6">Exemples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stories.html#ajouter-un-zero-devant-un-entier">Ajouter un zéro devant un entier</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#obtenir-les-heures-d-un-timestamp">Obtenir les heures d&#8217;un timestamp</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#transformer-un-template-en-noeud-du-dom">Transformer un template en nœud du DOM</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#inserer-un-element-du-dom-en-premier-sous-un-parent">Insérer un élément du DOM en premier sous un parent</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#limiter-le-nombre-d-enfants-a-un-nombre-donne">Limiter le nombre d&#8217;enfants à un nombre donné</a></li>
<li class="toctree-l4"><a class="reference internal" href="stories.html#recevoir-les-message">Recevoir les message</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stories.html#envoyer-un-message">4. Envoyer un message</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id7">Fonctions à coder</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id8">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id9">Exemples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stories.html#intercepter-la-soumission-d-un-formulaire">Intercepter la soumission d&#8217;un formulaire</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stories.html#ne-pas-envoyer-de-message-quand-le-message-ou-le-nom-est-vide">5. Ne pas envoyer de message quand le message ou le nom est vide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id10">Fonctions à coder</a></li>
<li class="toctree-l3"><a class="reference internal" href="stories.html#id11">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Coding Style (and related)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#all-languages-recommendations">All-languages recommendations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#white-spaces">White spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-format">File &#8220;format&#8221;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lines-length">Lines length</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spelling-grammar-and-meaning">Spelling, grammar and meaning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#meaning">Meaning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grammar">Grammar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spelling">Spelling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#common-pitfalls">Common pitfalls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conventions">Conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#javascript">Javascript</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linting">Linting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-naming">Variable naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-template">File template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-template">Object template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#without-inheritance">Without inheritance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#with-inheritance">With inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pep8">PEP8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-the-pythonic-way">Use the pythonic way</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#less-css">LESS/CSS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#whitespaces">Whitespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formatting">Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declaration-order">Declaration Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vendor-prefixes">Vendor prefixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selectors">Selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#less-and-magic-numbers">LESS And Magic Numbers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Good Chat</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Coding Style (and related)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/style.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="coding-style-and-related">
<h1>Coding Style (and related)<a class="headerlink" href="#coding-style-and-related" title="Lien permanent vers ce titre">¶</a></h1>
<p>Getting the style right is easy: a simple glimpse at the code will tell you if
it <em>looks</em> nice, and anyway most of IDEs are able to fix most of it by
themselves.</p>
<p>This is why there is absolutely no excuse to get the style wrong. Having a code
uniformly-looking helps reading the code afterwards, by a peer or by yourself,
and also helps seeing the structure of it. This <em>does</em> reduce the number of bugs
in the code you write and in the changes others will make as well.</p>
<p>Basically, once the good habits taken, they are totally painless to apply. We
wouldn&#8217;t want to reject free improvement, right?</p>
<div class="section" id="all-languages-recommendations">
<h2>All-languages recommendations<a class="headerlink" href="#all-languages-recommendations" title="Lien permanent vers ce titre">¶</a></h2>
<p>Those recommendations apply for all languages or kinds of text file you might
have to create.</p>
<div class="section" id="white-spaces">
<h3>White spaces<a class="headerlink" href="#white-spaces" title="Lien permanent vers ce titre">¶</a></h3>
<p>There is two kinds of whitespaces in a source code:</p>
<dl class="docutils">
<dt>indentation</dt>
<dd>Whatever indentation you choose, keep it consistent in all the project.</dd>
<dt>trailing whitespaces</dt>
<dd>Often, some whitespaces will be found after the line itself. This is <em>bad</em>.
For each trailing space, a kitten dies.</dd>
</dl>
<p>In order to prevent any of those two to get wrong, there is two things to do:</p>
<ul class="simple">
<li>Enable the display of whitespaces in your IDE</li>
<li>Enable the option that removes trailing whitespaces on save</li>
</ul>
</div>
<div class="section" id="file-format">
<span id="id1"></span><h3>File &#8220;format&#8221;<a class="headerlink" href="#file-format" title="Lien permanent vers ce titre">¶</a></h3>
<p>Plain-text/source code files must respect a few conventions</p>
<ul class="simple">
<li>All files are encoded in UTF-8.</li>
<li>If possible, start the file with a Vim modeline, even if you don&#8217;t use Vim,
this is helpful to guess the indentation and line length settings.</li>
<li>Use Unix (n) line endings.</li>
<li>The last line <strong>must</strong> include a line ending.</li>
<li>No caps nor non-ASCII characters in file names, as those lead to problems due
to inconsistencies accross operating systems.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Why the fuck shoud the last line include a line ending you ask? Well,
all lines are terminated with a line ending, why would the last one
not be? Furthermore, if in a further revision of the code a line is
added after the ex-last line, well that ex-last line will be
considered by Git as modified because a line ending was added to it,
which is not a good thing since that line was not actually modified.</p>
</div>
</div>
<div class="section" id="lines-length">
<h3>Lines length<a class="headerlink" href="#lines-length" title="Lien permanent vers ce titre">¶</a></h3>
<p>Why should we bother about lines length since text editors of this century all
know how to wrap text?</p>
<p>The answer is quite simple and lies in the fact that even if editors can wrap
lines, I am sorry to tell you that your brain cannot hold too much information
at once. By convention, a line width is fixed, and should your line get longer
than this, it probably means that it has too much information and that it should
be chopped down for clarity.</p>
<p>Take the following example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">some_shitty</span><span class="p">(</span><span class="n">thing</span><span class="p">(</span><span class="n">unreadable</span><span class="p">))</span> <span class="o">==</span> <span class="n">some</span><span class="p">(</span><span class="n">other_stuff</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="ow">and</span> <span class="n">pouet</span> \
   <span class="o">&amp;</span> <span class="n">BLAH</span> <span class="ow">and</span> <span class="p">(</span><span class="n">something</span> <span class="ow">or</span> <span class="p">(</span><span class="n">something_else</span> <span class="ow">and</span> <span class="n">shit</span><span class="p">)):</span>
   <span class="k">pass</span>
</pre></div>
</div>
<p>Now consider this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">some_shitty</span><span class="p">(</span><span class="n">thing</span><span class="p">(</span><span class="n">unreadable</span><span class="p">))</span> <span class="o">==</span> <span class="n">some</span><span class="p">(</span><span class="n">other_stuff</span><span class="p">)</span> \
        <span class="ow">and</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> \
        <span class="ow">and</span> <span class="n">pouet</span> <span class="o">&amp;</span> <span class="n">BLAH</span> \
        <span class="ow">and</span> <span class="p">(</span><span class="n">something</span> <span class="ow">or</span> <span class="p">(</span><span class="n">something_else</span> <span class="ow">and</span> <span class="n">shit</span><span class="p">)):</span>
   <span class="k">pass</span>
</pre></div>
</div>
<p>The most readable snippet appears clearly.</p>
</div>
<div class="section" id="spelling-grammar-and-meaning">
<h3>Spelling, grammar and meaning<a class="headerlink" href="#spelling-grammar-and-meaning" title="Lien permanent vers ce titre">¶</a></h3>
<p>The official language for everything related to the code is English. The reason
behind this is that everybody speaks english, so if the team ever had to get
international this wouldn&#8217;t be a hurdle. And anyways, code in any other language
feels awkward.</p>
<div class="section" id="meaning">
<h4>Meaning<a class="headerlink" href="#meaning" title="Lien permanent vers ce titre">¶</a></h4>
<p>However, not everybody is fluent, and there is a lot of false friends around.
This is why when you name something, you have to be 100% positive that the
meaning is right. Especially in data models, where any change can be painful.</p>
<p>For this reason, in case of any doubt just use a dictionnary. And check
carefully the meaning of any database field before commiting it.</p>
</div>
<div class="section" id="grammar">
<h4>Grammar<a class="headerlink" href="#grammar" title="Lien permanent vers ce titre">¶</a></h4>
<p>Please use a correct order of words in variables. It is basically
<cite>&#8220;adjective&#8221;_&#8221;subject&#8221;_&#8221;complement&#8221;</cite>. Like in <cite>max_brace_area</cite>. Not like
<cite>area_max_brace</cite>.</p>
</div>
<div class="section" id="spelling">
<h4>Spelling<a class="headerlink" href="#spelling" title="Lien permanent vers ce titre">¶</a></h4>
<p>No spelling mistakes are allowed in variable names. Beyond the fact that it
makes them look <em>nicer</em>, since most of the languages we use are dynamic, it
helps avoiding typos.</p>
<p>By example, if you type <cite>my_stuff.attrbute</cite> and that your IDE indicates a
spelling mistake, then you will notice that indeed you did want to write
<cite>my_stuff.attribute</cite>.</p>
<p>Again, this is a simple way to make less bugs.</p>
<p>Not all words will be in the dictionnary, but if you are absolutely sure that
the word exists, then feel free to add it to your dictionnary so it won&#8217;t bother
you anymore.</p>
</div>
<div class="section" id="common-pitfalls">
<h4>Common pitfalls<a class="headerlink" href="#common-pitfalls" title="Lien permanent vers ce titre">¶</a></h4>
<p>Let us go through some common issues met in variable names:</p>
<ul class="simple">
<li><cite>nb_objects</cite> makes a few mistakes<ul>
<li>Avoid using abbreviations, as they could be misunderstood</li>
<li>Maybe it&#8217;s just me, but <cite>number</cite> feels awkward in this case, <cite>count</cite> sounds
better</li>
<li>The order of words is wrong, the correct way would be <cite>objects_count</cite></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="conventions">
<h3>Conventions<a class="headerlink" href="#conventions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Most languages have established conventions on formatting the source code, like
the PEP8, jslint, PSR-2, etc.</p>
<p>One might like or not the style of those conventions, however since they are
widely used, there is no reason not to follow them. Other developpers will know
them and will be more confortable reading the code.</p>
</div>
</div>
<div class="section" id="javascript">
<h2>Javascript<a class="headerlink" href="#javascript" title="Lien permanent vers ce titre">¶</a></h2>
<p>Javascript leaves so much freedom to the developper that it becomes really easy
to make low quality and buggy code.</p>
<p>Of course, we want quality code, but even more, we want code that comes without
surprises and that any developper used to the style can easily read. Those
guidelines are thus very important if we want the Javascript development to go
smoothly.</p>
<div class="section" id="linting">
<h3>Linting<a class="headerlink" href="#linting" title="Lien permanent vers ce titre">¶</a></h3>
<p>As stated before, Javascript leaves too much freedom. In fact, some things that
can be done are harmful and error-prone. This is why Douglas Crockford created a
tool named <a class="reference external" href="http://www.jslint.com/">jslint</a>. It ensures that your code keeps a
consistent formatting, and that you do not use dangerous features. He explains
most of his reasons in <a class="reference external" href="http://www.youtube.com/watch?v=taaEzHI9xyY">a talk</a>
that anyone is strongly advised to watch, as well as in
<a class="reference external" href="http://javascript.crockford.com/code.html">this page</a>.</p>
<p>Here is how we configure jslint in ActivKonnect:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="cm">/*jslint indent: 4, maxlen: 100*/</span>
</pre></div>
</div>
<dl class="docutils">
<dt>indent: 4</dt>
<dd>As expected, the indentation is of 4 spaces. This is the default, but let&#8217;s
state it explicitly just to make it very clear.</dd>
<dt>maxlen: 100</dt>
<dd>The PEP8 explains it well, your brain can&#8217;t handle an infinitely long
strong. The industry standard would be around 80 columns, however as we have
control over our own screens, we think it is best to use a 100 columns
conventions.</dd>
</dl>
</div>
<div class="section" id="variable-naming">
<h3>Variable naming<a class="headerlink" href="#variable-naming" title="Lien permanent vers ce titre">¶</a></h3>
<p>The rules are pretty simple:</p>
<dl class="docutils">
<dt>Constants</dt>
<dd>All constants (aka content that should never vary, even though constants do
not actually exist in JS) should be named in all-uppercase, and words must
be separated by underscores. Ex: <cite>THIS_IS_A_CONSTANT</cite></dd>
<dt>Objects</dt>
<dd>Any constructor (aka something you have to call with <cite>new</cite>) must be named in
camel case and <strong>begin with an upper case</strong>. Ex: <cite>MyObjectName</cite></dd>
<dt>Variables and the rest</dt>
<dd>Everything else comes in camel case and <strong>must not</strong> begin with an upper
case. Ex: <cite>myVariableName</cite></dd>
</dl>
</div>
<div class="section" id="file-template">
<h3>File template<a class="headerlink" href="#file-template" title="Lien permanent vers ce titre">¶</a></h3>
<p>All Javascript files must be structured this way</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="cm">/*vim: fileencoding=utf8 tw=100 expandtab ts=4 sw=4 */</span>
<span class="cm">/*jslint indent: 4, maxlen: 100 */</span>
<span class="cm">/*global angular */</span>

<span class="c1">// Good Morning Planet Website</span>
<span class="c1">// (c) 2014 ActivKonnect</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">ng</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

    <span class="c1">// Code goes here</span>
<span class="p">}(</span><span class="nx">angular</span><span class="p">));</span>
</pre></div>
</div>
<ul>
<li><p class="first">There is a vim modeline, as explained in <a class="reference internal" href="#file-format"><span>File &#8220;format&#8221;</span></a>.</p>
</li>
<li><p class="first">The JSLint options, that should never vary.</p>
</li>
<li><p class="first">List of global variables. This helps keeping track of dependencies. Usual
suspects are <cite>angular</cite>, <cite>_</cite> and <cite>jQuery</cite>.</p>
</li>
<li><p class="first">The copyright statement, quite obviously.</p>
</li>
<li><p class="first">All the code is included in a <a class="reference external" href="http://en.wikipedia.org/wiki/Immediately-invoked_function_expression">IIFE</a>
in order to:</p>
<blockquote>
<div><ul class="simple">
<li>Minify the name of the global variables by passing them as arguments</li>
<li>Enable the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode">strict mode</a></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="object-template">
<span id="id2"></span><h3>Object template<a class="headerlink" href="#object-template" title="Lien permanent vers ce titre">¶</a></h3>
<p>There is many ways to create objects in Javascript, but we have to stay
consistent in the way we do it. The stucture presented below results of many
trials and errors, and should work well in all situations.</p>
<div class="section" id="without-inheritance">
<h4>Without inheritance<a class="headerlink" href="#without-inheritance" title="Lien permanent vers ce titre">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">MyObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">argument1</span><span class="p">,</span> <span class="nx">argument2</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">privateMember1</span><span class="p">,</span>
        <span class="nx">privateMember2</span><span class="p">,</span>

        <span class="c1">// Methods</span>
        <span class="nx">method1</span><span class="p">,</span>
        <span class="nx">method2</span><span class="p">,</span>
        <span class="nx">method3</span><span class="p">;</span>

    <span class="c1">// Public members</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">publicMember1</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">publicMember2</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// Method bodies</span>
    <span class="nx">method1</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Method 1 code</span>
    <span class="p">};</span>

    <span class="nx">method2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Method 2 code</span>
    <span class="p">};</span>

    <span class="nx">method3</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Method 3 code</span>
    <span class="p">};</span>

    <span class="c1">// Exports</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">method1</span> <span class="o">=</span> <span class="nx">method1</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">method2</span> <span class="o">=</span> <span class="nx">method2</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Constructor code</span>
    <span class="p">}());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Some explanations on the motivations behind this template:</p>
<ul>
<li><p class="first">Checkout out <a class="reference external" href="http://javascript.crockford.com/private.html">what Crockford</a>
has to say on the matter.</p>
</li>
<li><p class="first">The <cite>self = this</cite> allows you to safely access the object from its methods and
avoid the <a class="reference external" href="http://www.quirksmode.org/js/this.html">tricky behaviour</a> of
<cite>this</cite>.</p>
</li>
<li><p class="first">Private members are declared as local variables of the constructor&#8217;s closure.
They can never be accessed from the outside, so be careful about what you put
there.</p>
</li>
<li><p class="first">Public members are defined as members of <cite>self</cite>.</p>
</li>
<li><p class="first">All methods (public and private) are declared in a <cite>var</cite> statement. Why
declare them here and not use regular named <cite>functions</cite>? Because according to
JSLint, you can&#8217;t reference a symbol that hasn&#8217;t been defined yet (let&#8217;s skip
the reasons of that), so if methods were not defined this way, then you
wouldn&#8217;t be able to call <cite>method2()</cite> from <cite>method1()</cite>, by example.</p>
</li>
<li><p class="first">Public methods methods are declared with statements like
<cite>self.method1 = method1</cite>.</p>
<blockquote>
<div><ul class="simple">
<li>Doing so makes it possible to switch a method from private to public without
any refactoring.</li>
<li>It helps minification a lot. If you call <cite>method3()</cite> directly, the minifier
can rename it as it pleases him. However, if you call <cite>self.method3()</cite>, then
the minifier will only be able to rename <cite>self</cite> and will leave <cite>method3</cite>
untouched.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The code that would go in the constuctor if you used a traditionnal OO
language goes into an <a class="reference external" href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">IIFE</a>.</p>
<blockquote>
<div><ul class="simple">
<li>It helps readability, because you know exactly where the code begins and
ends, and it is always located in the same place.</li>
<li>If you want a local variable that does not have to be a private member, you
can declare it at the beginning of the IIEF. This way, it will not stay in
the object forever.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="with-inheritance">
<h4>With inheritance<a class="headerlink" href="#with-inheritance" title="Lien permanent vers ce titre">¶</a></h4>
<p>Some tests were conducted to see what inheritance patterns could be used,
however currently there is not enough use of it to actually decide anything.</p>
<p>Anyways, it&#8217;s best to create small orthogonal objects than a big comprehensive
object with a huge genealogy tree.</p>
</div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Lien permanent vers ce titre">¶</a></h2>
<p>There is not much to be said here about Python, since the Python community is
quite organized yet, and almost everything already has best practices
determined.</p>
<div class="section" id="pep8">
<h3>PEP8<a class="headerlink" href="#pep8" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference external" href="http://legacy.python.org/dev/peps/pep-0008/">PEP8</a> provides an excellent
guideline regarding the coding style.</p>
</div>
<div class="section" id="use-the-pythonic-way">
<h3>Use the pythonic way<a class="headerlink" href="#use-the-pythonic-way" title="Lien permanent vers ce titre">¶</a></h3>
<p>The Python language is very flexible, and you can very easily replicate what you
would write in other languages. However, this is a trap, as many things have a
<em>pythonic</em> way of doing them, and it&#8217;s often different from other languages, and
especially from Java.</p>
<p>To name a few:</p>
<ul class="simple">
<li>Not everything has to be in classes. Stand-alone functions are fine too.</li>
<li>There is many literals for maps, lists, tuples, sets, etc. Use them.</li>
<li>Use the <cite>property</cite> built-in instead of creating getters and setters the way
you would do it in Java.</li>
</ul>
</div>
</div>
<div class="section" id="less-css">
<h2>LESS/CSS<a class="headerlink" href="#less-css" title="Lien permanent vers ce titre">¶</a></h2>
<p>No official documentation exists or stands out for CSS, and even fewer regarding
LESS. However, the following inspirations were used here:</p>
<dl class="docutils">
<dt><a class="reference external" href="http://codeguide.co/">&#64;mdo&#8217;s Code Guide</a></dt>
<dd>Written by &#64;mdo, one of the guys behind Bootstrap, is basically interesting,
except for a few unexplained weird things like the choice to omit the 0 in
small floats (<cite>0.5</cite> vs <cite>.5</cite>), and the advice to make one-liner declarations.</dd>
<dt><a class="reference external" href="https://github.com/styleguide/css">Github&#8217;s Guideliens</a></dt>
<dd>A few interesting ideas, their style is documented with
<a class="reference external" href="https://github.com/kneath/kss">KSS</a>, which is something we might end up
doing.</dd>
<dt><a class="reference external" href="http://cssguidelin.es/">CSS Guidelines</a></dt>
<dd>Some high-level rules for writing clean CSS, which are basically specialized
in this document.</dd>
</dl>
<div class="section" id="whitespaces">
<h3>Whitespaces<a class="headerlink" href="#whitespaces" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Use soft-tabs with a two space indent. Spaces guarantee that code renders the
same way accross editors, and two spaces is the most used convention in CSS.</li>
<li>Put spaces after <cite>:</cite> in property declarations, but not before.</li>
<li>Put spaces before <cite>{</cite> in rules declarations.</li>
<li>Put line breaks between rulesets.</li>
<li>When grouping selectors, keep individual selectors to a single line.</li>
<li>Place <cite>}</cite> at the end of declaration blocks on a new line.</li>
<li>No more than a single declaration per line, for readability and error
reporting.</li>
<li>Always put a space after a coma</li>
</ul>
</div>
<div class="section" id="formatting">
<h3>Formatting<a class="headerlink" href="#formatting" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>For colors, use whenever possible, by order of priority</dt>
<dd><ul class="first last simple">
<li>The pre-defined variable for that color</li>
<li>Color names, like <cite>white</cite></li>
<li>Short-hand notations, like <cite>#abc</cite></li>
<li>Hex colors, like <cite>#fabb00</cite></li>
<li><cite>rgba()</cite>, like <cite>rgba(1, 1, 1, 0.5)</cite></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Don&#8217;t put units with zero. <cite>0</cite> is right, <cite>0px</cite> is wrong.</p>
</li>
</ul>
<p>A few exemple of what is right or wrong:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="c">/* Bad CSS */</span>
<span class="nc">.selector</span><span class="o">,</span> <span class="nc">.selector-secondary</span><span class="o">,</span> <span class="nc">.selector</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">text</span><span class="o">]</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span><span class="m">15px</span><span class="p">;</span>
  <span class="k">margin</span><span class="o">:</span><span class="m">0px</span> <span class="m">0px</span> <span class="m">15px</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span><span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">5</span><span class="p">);</span>
  <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span><span class="m">0px</span> <span class="m">1px</span> <span class="m">2px</span> <span class="m">#CCC</span><span class="o">,</span><span class="k">inset</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">0</span> <span class="m">#FFFFFF</span>
<span class="p">}</span>

<span class="c">/* Good CSS */</span>
<span class="nc">.selector</span><span class="o">,</span>
<span class="nc">.selector-secondary</span><span class="o">,</span>
<span class="nc">.selector</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">]</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">15px</span><span class="p">;</span>
  <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">15px</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="p">);</span>
  <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">2px</span> <span class="m">#ccc</span><span class="o">,</span> <span class="k">inset</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">0</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="declaration-order">
<h3>Declaration Order<a class="headerlink" href="#declaration-order" title="Lien permanent vers ce titre">¶</a></h3>
<p>Place property declarations in that order:</p>
<ol class="arabic simple">
<li>Positioning</li>
<li>Box model</li>
<li>Animations</li>
<li>Typographic</li>
<li>Visual</li>
<li>Other</li>
<li>LESS Nested Declarations</li>
</ol>
<p>Here is an exemple:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nc">.declaration-order</span> <span class="p">{</span>
  <span class="c">/* Positioning */</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">100</span><span class="p">;</span>

  <span class="c">/* Animation */</span>
  <span class="o">.</span><span class="n">lh</span><span class="o">-</span><span class="n">transition</span><span class="p">(</span><span class="m">300</span><span class="n">ms</span> <span class="n">ease</span> <span class="n">all</span><span class="p">);</span>

  <span class="c">/* Box-model */</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>

  <span class="c">/* Typography */</span>
  <span class="k">font</span><span class="o">:</span> <span class="k">normal</span> <span class="m">13px</span> <span class="s2">&quot;Helvetica Neue&quot;</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span>
  <span class="k">line-height</span><span class="o">:</span> <span class="m">1</span><span class="o">.</span><span class="m">5</span><span class="p">;</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#333</span><span class="p">;</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>

  <span class="c">/* Visual */</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#f5f5f5</span><span class="p">;</span>
  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#e5e5e5</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">3px</span><span class="p">;</span>

  <span class="c">/* Misc */</span>
  <span class="k">opacity</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="vendor-prefixes">
<h3>Vendor prefixes<a class="headerlink" href="#vendor-prefixes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Many modern CSS features depend on vendor prefixes. In order to eliminate the
difference between browsers, we use the prefixed version of
<a class="reference external" href="http://lesshat.madebysource.com/">LESS Hat</a>, which automatically generates
styles for every browser, including for complex properties like gradients.</p>
<p>It must always be used for properties that it handles, and vendor prefixes must
not be written manually.</p>
</div>
<div class="section" id="selectors">
<h3>Selectors<a class="headerlink" href="#selectors" title="Lien permanent vers ce titre">¶</a></h3>
<p>A lot has been written about selectors, and it is mostly summarized in the
<a class="reference external" href="http://cssguidelin.es/#css-selectors">CSS Guidelines</a>. What is said in there
has to be kept in mind, but with the experience of GMP, a few rules seem to be
especially important.</p>
<dl class="docutils">
<dt>Try to scope CSS per component</dt>
<dd><p class="first">Each component (think &#8220;directive&#8221; or simply a noticeable UI component)
should get its own <cite>.gmp-X</cite> class. It helps namespacing things under it.</p>
<div class="highlight-less"><div class="highlight"><pre>.gmp-my-directive {
  .some-inside-class {
    color: white;
  }

  // Rest of the code goes here
}
</pre></div>
</div>
<div class="last highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;gmp-my-directive&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">&quot;some-inside-class&quot;</span><span class="nt">&gt;</span>Stuff<span class="nt">&lt;/h1&gt;</span>

    <span class="c">&lt;!-- Rest of the code goes here --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
<dt>Avoid using selectors that go deep into the DOM</dt>
<dd><p class="first">If you use a selector like <cite>.gmp-my-stuff button</cite>, it will affect all the
buttons inside your component, including those from third party directives
you could decide to include later on.</p>
<p class="last">Better solutions would be <cite>.gmp-my-stuff &gt; button</cite> if possible or using a
class for the button <cite>.gmp-my-stuff .stuff-button</cite>.</p>
</dd>
<dt>Factorize styles</dt>
<dd><p class="first">In the previous example we select a button inside our component, however in
the case of buttons there is much to bet on the fact that this particular
button will look like all buttons on the site. For this reason, it could be
considered as a component itself, and get its own namespace.</p>
<div class="last highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;gmp-my-stuff&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        Do something
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;gmp-stuff-button&quot;</span><span class="nt">&gt;</span>Action!<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="less-and-magic-numbers">
<h3>LESS And Magic Numbers<a class="headerlink" href="#less-and-magic-numbers" title="Lien permanent vers ce titre">¶</a></h3>
<p>One of the worst things that can happen to a CSS stylesheet, is to get it
filled with many interdependant values (dimensions, positions, colors, ...)
but without knowing where does the calculation comes from. In those cases,
changing even the smallest thing can lead to many unwanted side-effects.</p>
<p>In order to compensate that and to document the values, before starting to
style, all the useful numbers/colors should be put at the beginning of each
component.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Those variables will be scoped to the component, and will not be
available outside of it, so you are free to choose a straightforward
name for it.</p>
</div>
<p>As example, we can take the following piece of abstract act:</p>
<img alt="_images/magic_numbers.png" src="_images/magic_numbers.png" />
<p>The idea is basically to have a box, with a given padding, with two other
boxes inside, that keep the padding rule but have a bottom border that
expands into the padding.</p>
<p>The following LESS code allows to produce just that, with a few configurable
variables at the top.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;gmp-box&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;bottom-stuff&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;right-stuff&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<div class="highlight-css"><div class="highlight"><pre>* {
  box-sizing: border-box;
}

.gmp-box {
<span class="hll">  @box-color: #aaa;
</span><span class="hll">  @box-to-top: 10px;
</span><span class="hll">  @box-to-left: @box-to-top;
</span><span class="hll">  @box-size: 300px;
</span><span class="hll">  @box-padding: 20px;
</span><span class="hll">
</span><span class="hll">  @bottom-stuff-width: (@box-size - 2 * @box-padding) * 2 / 3;
</span><span class="hll">  @bottom-stuff-height: @box-size / 3;
</span><span class="hll">  @bottom-stuff-border-size: 4px;
</span><span class="hll">  @bottom-stuff-color: red;
</span><span class="hll">
</span><span class="hll">  @right-stuff-border-size: 13px;
</span><span class="hll">  @right-stuff-color: blue;
</span>
  position: absolute;
  top: @box-to-top;
  left: @box-to-left;

  .size(@box-size);

  background-color: @box-color;

  .bottom-stuff {
    position: absolute;
    left: @box-padding;
    bottom: @box-padding - @bottom-stuff-border-size;

    width: @bottom-stuff-width;
    height: @bottom-stuff-height;

    background-color: lighten(@bottom-stuff-color, 20%);
    border-bottom: @bottom-stuff-border-size @bottom-stuff-color solid;
  }

  .right-stuff {
    position: absolute;
    right: @box-padding;
    bottom: @box-padding - @right-stuff-border-size;
    top: @box-padding;

    width: @box-size - (@box-padding * 2) - @bottom-stuff-width;

    background-color: lighten(@right-stuff-color, 20%);
    border-bottom: @right-stuff-border-size @right-stuff-color solid;
  }
}
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="stories.html" class="btn btn-neutral" title="Stories" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Rémy Sanchez.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>